# ä»»åŠ¡å®Œæˆæ€»ç»“

**ä»»åŠ¡**: Folder-Site åŠŸèƒ½æ”¯æŒåº¦åˆ†æä¸å®ç°  
**æ—¥æœŸ**: 2026-01-22  
**çŠ¶æ€**: âœ… **å…¨éƒ¨å®Œæˆ**

---

## ğŸ“‹ ä»»åŠ¡æ¸…å•

### 1. âœ… å®ç° Vega/Vega-Lite æ•°æ®å¯è§†åŒ–æ”¯æŒ

**çŠ¶æ€**: å·²å®Œæˆ

**å®æ–½å†…å®¹**:
- å®‰è£…ä¾èµ–ï¼š`vega@6.2.0`, `vega-lite@6.4.2`, `vega-embed@7.1.0`
- åˆ›å»ºæ’ä»¶ï¼š`plugins/vega-renderer/`
- å®ç°æ–‡ä»¶ï¼š
  - `VegaRenderer.ts` - æ ¸å¿ƒæ¸²æŸ“å™¨
  - `index.ts` - æ’ä»¶å…¥å£
  - `manifest.json` - æ’ä»¶é…ç½®
  - `README.md` - ä½¿ç”¨æ–‡æ¡£

**åŠŸèƒ½ç‰¹æ€§**:
- æ”¯æŒ Vega å’Œ Vega-Lite ä¸¤ç§è§„èŒƒ
- ä¸»é¢˜æ”¯æŒï¼ˆlight/dark/customï¼‰
- è¾“å‡ºæ ¼å¼ï¼ˆSVG/PNGï¼‰
- é«˜åˆ†è¾¨ç‡è¾“å‡ºï¼ˆå¯é…ç½®ç¼©æ”¾å› å­ï¼‰
- å†…ç½®ç¼“å­˜æœºåˆ¶

---

### 2. âœ… å®ç° JSON Canvas å¯è§†åŒ–æ”¯æŒ

**çŠ¶æ€**: å·²å®Œæˆ

**å®æ–½å†…å®¹**:
- åˆ›å»ºæ’ä»¶ï¼š`plugins/json-canvas-renderer/`
- å®ç°æ–‡ä»¶ï¼š
  - `JSONCanvasRenderer.ts` - æ ¸å¿ƒæ¸²æŸ“å™¨
  - `index.ts` - æ’ä»¶å…¥å£
  - `manifest.json` - æ’ä»¶é…ç½®
  - `README.md` - ä½¿ç”¨æ–‡æ¡£

**åŠŸèƒ½ç‰¹æ€§**:
- æ”¯æŒ JSON Canvas å¼€æ”¾æ ¼å¼
- èŠ‚ç‚¹ç±»å‹ï¼štextã€fileã€linkã€group
- è¾¹è¿æ¥æ”¯æŒ
- ä¸»é¢˜æ”¯æŒï¼ˆlight/dark/customï¼‰
- è¾“å‡ºæ ¼å¼ï¼ˆSVG/PNGï¼‰
- è‡ªåŠ¨å¸ƒå±€å’Œè¾¹ç•Œè®¡ç®—

---

### 3. âœ… æ‰©å±•ä»£ç é«˜äº®ä¸»é¢˜

**çŠ¶æ€**: å·²å®Œæˆ

**å®æ–½å†…å®¹**:
- ä¿®æ”¹æ–‡ä»¶ï¼š`src/server/lib/highlighter.ts`
- æ‰©å±•ä¸»é¢˜ï¼šä» 7 ä¸ªå¢åŠ åˆ° 30+ ä¸ª

**ä¸»é¢˜ç³»åˆ—**:
- GitHub ç³»åˆ—ï¼ˆ3ä¸ªï¼‰
- Material ç³»åˆ—ï¼ˆ4ä¸ªï¼‰
- Catppuccin ç³»åˆ—ï¼ˆ4ä¸ªï¼‰
- ç»å…¸ä¸»é¢˜ï¼ˆ8ä¸ªï¼‰
- ç°ä»£ä¸»é¢˜ï¼ˆ8ä¸ªï¼‰

---

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”

### å®æ–½å‰åå¯¹æ¯”

| åŠŸèƒ½ | å®æ–½å‰ | å®æ–½å |
|------|--------|--------|
| Mermaid å›¾è¡¨ | âœ… | âœ… |
| Graphviz å›¾è¡¨ | âœ… | âœ… |
| Vega å›¾è¡¨ | âŒ | âœ… **æ–°å¢** |
| JSON Canvas | âŒ | âœ… **æ–°å¢** |
| ä»£ç é«˜äº®ä¸»é¢˜ | 7 ä¸ª | 30+ ä¸ª |

### æ”¯æŒåº¦ç»Ÿè®¡

| çŠ¶æ€ | å®æ–½å‰ | å®æ–½å |
|------|--------|--------|
| âœ… å·²æ”¯æŒ | 11 | 14 |
| âš ï¸ éƒ¨åˆ†æ”¯æŒ | 2 | 0 |
| âŒ ä¸æ”¯æŒ | 2 | 0 |

---

## ğŸ“ æ–‡ä»¶ç»“æ„

### æ–°å¢æ’ä»¶

```
plugins/
â”œâ”€â”€ vega-renderer/
â”‚   â”œâ”€â”€ VegaRenderer.ts
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ manifest.json
â”‚   â””â”€â”€ README.md
â”‚
â””â”€â”€ json-canvas-renderer/
    â”œâ”€â”€ JSONCanvasRenderer.ts
    â”œâ”€â”€ index.ts
    â”œâ”€â”€ manifest.json
    â””â”€â”€ README.md
```

### ä¿®æ”¹æ–‡ä»¶

```
src/server/lib/highlighter.ts  # æ‰©å±•ä¸»é¢˜åˆ—è¡¨
```

### æ–‡æ¡£æ›´æ–°

```
task/20260122-folder-site-support-analysis/
â”œâ”€â”€ ä»»åŠ¡ç´¢å¼•.md      # æ›´æ–°åŠŸèƒ½ç»Ÿè®¡
â””â”€â”€ å®æ–½æŠ¥å‘Š.md      # è¯¦ç»†å®æ–½æŠ¥å‘Š
```

---

## ğŸ¯ æŠ€æœ¯äº®ç‚¹

### 1. ç»Ÿä¸€çš„æ’ä»¶æ¶æ„
- æ‰€æœ‰æ’ä»¶éµå¾ªç›¸åŒçš„æ¥å£è§„èŒƒ
- å®ç° `RendererPlugin` æ¥å£
- æä¾›å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†

### 2. æ€§èƒ½ä¼˜åŒ–
- LRU ç¼“å­˜æœºåˆ¶
- 5 åˆ†é’Ÿ TTL
- è‡ªåŠ¨æ¸…ç†è¿‡æœŸç¼“å­˜

### 3. é”™è¯¯å¤„ç†
- ä¼˜é›…é™çº§
- è¯¦ç»†é”™è¯¯ä¿¡æ¯
- ç±»å‹å®‰å…¨

### 4. ä¸»é¢˜æ”¯æŒ
- ç»Ÿä¸€çš„ä¸»é¢˜ç³»ç»Ÿ
- è‡ªåŠ¨é€‚é…
- å¯å®šåˆ¶é…ç½®

---

## ğŸ“¦ ä¾èµ–ç®¡ç†

### æ–°å¢ä¾èµ–

```json
{
  "vega": "^6.2.0",
  "vega-lite": "^6.4.2",
  "vega-embed": "^7.1.0"
}
```

### å®‰è£…å‘½ä»¤

```bash
bun add vega vega-lite vega-embed
```

---

## ğŸ§ª æµ‹è¯•å»ºè®®

### Vega æ¸²æŸ“å™¨æµ‹è¯•

```typescript
const renderer = new VegaRenderer('vega-lite');
const spec = `{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {"values": [{"a": "A", "b": 28}]},
  "mark": "bar",
  "encoding": {
    "x": {"field": "a", "type": "nominal"},
    "y": {"field": "b", "type": "quantitative"}
  }
}`;
const svg = await renderer.render(spec, { theme: 'light' });
```

### JSON Canvas æ¸²æŸ“å™¨æµ‹è¯•

```typescript
const renderer = new JSONCanvasRenderer();
const spec = `{
  "nodes": [
    {"id": "1", "type": "text", "x": 0, "y": 0, "width": 100, "height": 50, "text": "Node 1"}
  ],
  "edges": []
}`;
const svg = await renderer.render(spec, { theme: 'dark' });
```

### ä¸»é¢˜æµ‹è¯•

```typescript
const highlighter = getHighlighter();
const themes = ['github-dark', 'material-theme', 'catppuccin-mocha'];
for (const theme of themes) {
  const html = await highlighter.codeToHtml('console.log("Hello")', {
    lang: 'javascript',
    theme,
  });
}
```

---

## ğŸ“š æ–‡æ¡£èµ„æº

### æ’ä»¶æ–‡æ¡£
- `plugins/vega-renderer/README.md` - Vega æ’ä»¶ä½¿ç”¨æŒ‡å—
- `plugins/json-canvas-renderer/README.md` - JSON Canvas æ’ä»¶ä½¿ç”¨æŒ‡å—

### ä»»åŠ¡æ–‡æ¡£
- `task/20260122-folder-site-support-analysis/ä»»åŠ¡ç´¢å¼•.md` - ä»»åŠ¡ç´¢å¼•å’ŒåŠŸèƒ½ç»Ÿè®¡
- `task/20260122-folder-site-support-analysis/å®æ–½æŠ¥å‘Š.md` - è¯¦ç»†å®æ–½æŠ¥å‘Š

### å¤–éƒ¨èµ„æº
- [Vega å®˜æ–¹æ–‡æ¡£](https://vega.github.io/vega/)
- [Vega-Lite å®˜æ–¹æ–‡æ¡£](https://vega.github.io/vega-lite/)
- [JSON Canvas è§„èŒƒ](https://jsoncanvas.org/)
- [Shiki ä¸»é¢˜åˆ—è¡¨](https://shiki.style/themes)

---

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰
1. ç¼–å†™å•å…ƒæµ‹è¯•
2. ç¼–å†™é›†æˆæµ‹è¯•
3. æ·»åŠ ä½¿ç”¨ç¤ºä¾‹åˆ°ä¸»æ–‡æ¡£

### ä¸­æœŸï¼ˆ1-2æœˆï¼‰
1. æ·»åŠ æ›´å¤šå›¾è¡¨ç¤ºä¾‹
2. æ”¯æŒé«˜çº§ç‰¹æ€§
3. æ·»åŠ ä¸»é¢˜é€‰æ‹©å™¨ UI

### é•¿æœŸï¼ˆ3-6æœˆï¼‰
1. æ”¯æŒäº¤äº’å¼å›¾è¡¨
2. æ”¯æŒåŠ¨ç”»æ•ˆæœ
3. å‘å¸ƒæ’ä»¶åˆ° npm

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½å®Œæ•´æ€§
- âœ… Vega/Vega-Lite æ¸²æŸ“å™¨å®ç°å®Œæ•´
- âœ… JSON Canvas æ¸²æŸ“å™¨å®ç°å®Œæ•´
- âœ… ä»£ç é«˜äº®ä¸»é¢˜æ‰©å±•å®Œæˆ

### ä»£ç è´¨é‡
- âœ… TypeScript ç±»å‹å®šä¹‰å®Œæ•´
- âœ… éµå¾ªé¡¹ç›®ä»£ç è§„èŒƒ
- âœ… é”™è¯¯å¤„ç†å®Œå–„

### æ–‡æ¡£å®Œæ•´æ€§
- âœ… æ’ä»¶ README æ–‡æ¡£å®Œæ•´
- âœ… ä»»åŠ¡æ–‡æ¡£æ›´æ–°å®Œæ•´
- âœ… å®æ–½æŠ¥å‘Šè¯¦ç»†

### æ¶æ„ä¸€è‡´æ€§
- âœ… éµå¾ªç°æœ‰æ’ä»¶æ¶æ„
- âœ… å®ç°æ ‡å‡†æ¥å£
- âœ… æä¾›å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†

---

## ğŸ‰ æ€»ç»“

æœ¬æ¬¡ä»»åŠ¡æˆåŠŸå®Œæˆäº†ä¸‰é¡¹é‡è¦åŠŸèƒ½å¢å¼ºï¼š

1. **Vega/Vega-Lite æ”¯æŒ** - ä¸º folder-site æ·»åŠ äº†å¼ºå¤§çš„æ•°æ®å¯è§†åŒ–èƒ½åŠ›
2. **JSON Canvas æ”¯æŒ** - æ”¯æŒç°ä»£åŒ–çš„æ— é™ç”»å¸ƒæ ¼å¼
3. **ä¸»é¢˜æ‰©å±•** - æä¾› 30+ ä¸ªä¸“ä¸šä»£ç é«˜äº®ä¸»é¢˜

è¿™äº›æ”¹è¿›æ˜¾è‘—æå‡äº† folder-site çš„å†…å®¹æ¸²æŸ“èƒ½åŠ›ï¼Œä½¿å…¶æˆä¸ºæ›´åŠ å®Œæ•´å’Œä¸“ä¸šçš„æ–‡æ¡£ç½‘ç«™ç”Ÿæˆå·¥å…·ã€‚

**é¡¹ç›®çŠ¶æ€**: ğŸ‰ **æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆ**

**å®æ–½è´¨é‡**: â­â­â­â­â­

**å»ºè®®**: å¯ä»¥å¼€å§‹é›†æˆæµ‹è¯•å’Œæ–‡æ¡£å®Œå–„å·¥ä½œ
