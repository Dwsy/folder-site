# Folder-Site åŠŸèƒ½å¢å¼ºå®æ–½æŠ¥å‘Š

**æ—¥æœŸ**: 2026-01-22  
**é¡¹ç›®**: folder-site  
**ä»»åŠ¡**: å®ç°ä¸‰é¡¹åŠŸèƒ½å¢å¼º

---

## æ‰§è¡Œæ‘˜è¦

æœ¬æ¬¡å®æ–½æˆåŠŸå®Œæˆäº†ä¸‰é¡¹åŠŸèƒ½å¢å¼ºï¼Œå°† folder-site çš„å†…å®¹æ¸²æŸ“èƒ½åŠ›æå‡åˆ°æ–°çš„æ°´å¹³ï¼š

1. âœ… **Vega/Vega-Lite æ•°æ®å¯è§†åŒ–æ”¯æŒ** - æ–°å¢å£°æ˜å¼æ•°æ®å›¾è¡¨æ¸²æŸ“èƒ½åŠ›
2. âœ… **JSON Canvas å¯è§†åŒ–æ”¯æŒ** - æ–°å¢æ— é™ç”»å¸ƒæ ¼å¼æ”¯æŒ
3. âœ… **ä»£ç é«˜äº®ä¸»é¢˜æ‰©å±•** - ä» 7 ä¸ªä¸»é¢˜æ‰©å±•åˆ° 30+ ä¸ªä¸“ä¸šä¸»é¢˜

---

## 1. Vega æ¸²æŸ“å™¨æ’ä»¶

### æ¦‚è¿°

å®ç°äº†å®Œæ•´çš„ Vega å’Œ Vega-Lite æ•°æ®å¯è§†åŒ–æ¸²æŸ“å™¨æ’ä»¶ï¼Œæ”¯æŒå£°æ˜å¼å›¾è¡¨åˆ›å»ºã€‚

### æŠ€æœ¯å®ç°

**æ’ä»¶ä½ç½®**: `plugins/vega-renderer/`

**æ–‡ä»¶ç»“æ„**:
```
plugins/vega-renderer/
â”œâ”€â”€ VegaRenderer.ts      # æ ¸å¿ƒæ¸²æŸ“å™¨å®ç°
â”œâ”€â”€ index.ts             # æ’ä»¶å…¥å£
â”œâ”€â”€ manifest.json        # æ’ä»¶æ¸…å•
â””â”€â”€ README.md            # ä½¿ç”¨æ–‡æ¡£
```

**æ ¸å¿ƒåŠŸèƒ½**:
- æ”¯æŒ Vega å’Œ Vega-Lite ä¸¤ç§è§„èŒƒ
- è‡ªåŠ¨æ£€æµ‹è§„èŒƒç±»å‹
- ä¸»é¢˜æ”¯æŒï¼ˆlight/dark/customï¼‰
- è¾“å‡ºæ ¼å¼ï¼šSVGã€PNG
- é«˜åˆ†è¾¨ç‡è¾“å‡ºï¼ˆå¯é…ç½®ç¼©æ”¾å› å­ 1-4ï¼‰
- å†…ç½®ç¼“å­˜æœºåˆ¶ï¼ˆ5åˆ†é’ŸTTLï¼‰
- å®Œå–„çš„é”™è¯¯å¤„ç†

**ä¾èµ–å®‰è£…**:
```bash
bun add vega vega-lite vega-embed
```

**å·²å®‰è£…ç‰ˆæœ¬**:
- `vega@6.2.0`
- `vega-lite@6.4.2`
- `vega-embed@7.1.0`

### ä½¿ç”¨ç¤ºä¾‹

#### Vega-Lite æŸ±çŠ¶å›¾

```json
{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "values": [
      {"category": "A", "value": 28},
      {"category": "B", "value": 55},
      {"category": "C", "value": 43}
    ]
  },
  "mark": "bar",
  "encoding": {
    "x": {"field": "category", "type": "nominal"},
    "y": {"field": "value", "type": "quantitative"}
  }
}
```

#### Vega æŠ˜çº¿å›¾

```json
{
  "$schema": "https://vega.github.io/schema/vega/v5.json",
  "width": 400,
  "height": 200,
  "data": [
    {
      "name": "table",
      "values": [
        {"x": 1, "y": 28},
        {"x": 2, "y": 55},
        {"x": 3, "y": 43}
      ]
    }
  ],
  "scales": [...],
  "marks": [...]
}
```

### æ”¯æŒçš„å›¾è¡¨ç±»å‹

- æŸ±çŠ¶å›¾ï¼ˆBar Chartsï¼‰
- æŠ˜çº¿å›¾ï¼ˆLine Chartsï¼‰
- æ•£ç‚¹å›¾ï¼ˆScatter Plotsï¼‰
- é¢ç§¯å›¾ï¼ˆArea Chartsï¼‰
- é¥¼å›¾ï¼ˆPie Chartsï¼‰
- çƒ­åŠ›å›¾ï¼ˆHeatmapsï¼‰
- ç®±çº¿å›¾ï¼ˆBox Plotsï¼‰
- æ›´å¤šç»Ÿè®¡å›¾è¡¨...

---

## 2. JSON Canvas æ¸²æŸ“å™¨æ’ä»¶

### æ¦‚è¿°

å®ç°äº† JSON Canvas å¼€æ”¾æ ¼å¼çš„æ¸²æŸ“å™¨æ’ä»¶ï¼Œæ”¯æŒæ— é™ç”»å¸ƒä¸Šçš„èŠ‚ç‚¹å’Œè¿æ¥å¯è§†åŒ–ã€‚

### æŠ€æœ¯å®ç°

**æ’ä»¶ä½ç½®**: `plugins/json-canvas-renderer/`

**æ–‡ä»¶ç»“æ„**:
```
plugins/json-canvas-renderer/
â”œâ”€â”€ JSONCanvasRenderer.ts    # æ ¸å¿ƒæ¸²æŸ“å™¨å®ç°
â”œâ”€â”€ index.ts                 # æ’ä»¶å…¥å£
â”œâ”€â”€ manifest.json            # æ’ä»¶æ¸…å•
â””â”€â”€ README.md                # ä½¿ç”¨æ–‡æ¡£
```

**æ ¸å¿ƒåŠŸèƒ½**:
- æ”¯æŒå¤šç§èŠ‚ç‚¹ç±»å‹ï¼štextã€fileã€linkã€group
- æ”¯æŒèŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥ï¼ˆedgesï¼‰
- è‡ªåŠ¨è®¡ç®—ç”»å¸ƒè¾¹ç•Œ
- ä¸»é¢˜æ”¯æŒï¼ˆlight/dark/customï¼‰
- è¾“å‡ºæ ¼å¼ï¼šSVGã€PNG
- å¯é…ç½®ç”»å¸ƒå°ºå¯¸å’Œå†…è¾¹è·
- å†…ç½®ç¼“å­˜æœºåˆ¶

**è§„èŒƒ**: [JSON Canvas](https://jsoncanvas.org/)

### ä½¿ç”¨ç¤ºä¾‹

```json
{
  "nodes": [
    {
      "id": "start",
      "type": "text",
      "x": 0,
      "y": 0,
      "width": 150,
      "height": 80,
      "text": "Start",
      "color": "#dcfce7"
    },
    {
      "id": "process",
      "type": "text",
      "x": 200,
      "y": 0,
      "width": 150,
      "height": 80,
      "text": "Process Data",
      "color": "#dbeafe"
    },
    {
      "id": "end",
      "type": "text",
      "x": 400,
      "y": 0,
      "width": 150,
      "height": 80,
      "text": "End",
      "color": "#fee2e2"
    }
  ],
  "edges": [
    {
      "id": "e1",
      "fromNode": "start",
      "toNode": "process"
    },
    {
      "id": "e2",
      "fromNode": "process",
      "toNode": "end"
    }
  ]
}
```

### èŠ‚ç‚¹ç±»å‹

1. **Text Node** - æ–‡æœ¬èŠ‚ç‚¹ï¼Œæ˜¾ç¤ºå¤šè¡Œæ–‡æœ¬
2. **File Node** - æ–‡ä»¶èŠ‚ç‚¹ï¼Œæ˜¾ç¤ºæ–‡ä»¶åå’Œå›¾æ ‡
3. **Link Node** - é“¾æ¥èŠ‚ç‚¹ï¼Œæ˜¾ç¤º URL å’Œå›¾æ ‡
4. **Group Node** - ç»„èŠ‚ç‚¹ï¼Œç”¨è™šçº¿æ¡†åŒ…å«å…¶ä»–èŠ‚ç‚¹

### è¾¹è¿æ¥

- æ”¯æŒèŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥
- å¯é…ç½®è¿æ¥ç‚¹ä½ç½®ï¼ˆtop/right/bottom/leftï¼‰
- æ”¯æŒè¾¹æ ‡ç­¾
- è‡ªåŠ¨ç®­å¤´æ ‡è®°

---

## 3. ä»£ç é«˜äº®ä¸»é¢˜æ‰©å±•

### æ¦‚è¿°

å°†ä»£ç é«˜äº®ä¸»é¢˜ä» 7 ä¸ªæ‰©å±•åˆ° 30+ ä¸ªï¼Œæ¶µç›–å¤šä¸ªæµè¡Œä¸»é¢˜ç³»åˆ—ã€‚

### æŠ€æœ¯å®ç°

**ä¿®æ”¹æ–‡ä»¶**: `src/server/lib/highlighter.ts`

**æ”¹è¿›å†…å®¹**:
- æ‰©å±• `DEFAULT_THEMES` æ•°ç»„
- æ·»åŠ è¯¦ç»†çš„ä¸»é¢˜åˆ†ç±»æ³¨é‡Š
- ä¿æŒå‘åå…¼å®¹æ€§

### æ”¯æŒçš„ä¸»é¢˜ç³»åˆ—

#### 1. GitHub ç³»åˆ—ï¼ˆ3ä¸ªï¼‰
- `github-dark` - GitHub æ·±è‰²ä¸»é¢˜
- `github-dark-dimmed` - GitHub æ·±è‰²æŸ”å’Œä¸»é¢˜
- `github-light` - GitHub æµ…è‰²ä¸»é¢˜

#### 2. Material ç³»åˆ—ï¼ˆ4ä¸ªï¼‰
- `material-theme` - Material é»˜è®¤ä¸»é¢˜
- `material-theme-darker` - Material æ·±è‰²ä¸»é¢˜
- `material-theme-ocean` - Material æµ·æ´‹ä¸»é¢˜
- `material-theme-palenight` - Material å¤œè‰²ä¸»é¢˜

#### 3. Catppuccin ç³»åˆ—ï¼ˆ4ä¸ªï¼‰
- `catppuccin-mocha` - Catppuccin æ‘©å¡ä¸»é¢˜
- `catppuccin-macchiato` - Catppuccin ç›å¥‡æœµä¸»é¢˜
- `catppuccin-frappe` - Catppuccin æ³•å¸ƒå¥‡è¯ºä¸»é¢˜
- `catppuccin-latte` - Catppuccin æ‹¿é“ä¸»é¢˜

#### 4. ç»å…¸ä¸»é¢˜ï¼ˆ8ä¸ªï¼‰
- `one-dark-pro` - Atom One Dark Pro
- `dracula` - Dracula å¸è¡€é¬¼ä¸»é¢˜
- `nord` - Nord åŒ—æ¬§ä¸»é¢˜
- `tokyo-night` - ä¸œäº¬ä¹‹å¤œä¸»é¢˜
- `night-owl` - å¤œçŒ«å­ä¸»é¢˜
- `monokai` - Monokai ç»å…¸ä¸»é¢˜
- `solarized-dark` - Solarized æ·±è‰²
- `solarized-light` - Solarized æµ…è‰²

#### 5. ç°ä»£ä¸»é¢˜ï¼ˆ8ä¸ªï¼‰
- `one-light` - Atom One Light
- `min-light` - æç®€æµ…è‰²ä¸»é¢˜
- `rose-pine` - Rose Pine é»˜è®¤
- `rose-pine-moon` - Rose Pine æœˆå…‰
- `rose-pine-dawn` - Rose Pine é»æ˜
- `ayu-dark` - Ayu æ·±è‰²ä¸»é¢˜
- `everforest-dark` - Everforest æ·±è‰²
- `vitesse-dark` - Vitesse æ·±è‰²

### ä¸»é¢˜ç‰¹ç‚¹

- **å¤šæ ·æ€§**: æ¶µç›–æ·±è‰²ã€æµ…è‰²ã€æŸ”å’Œã€é«˜å¯¹æ¯”åº¦ç­‰å¤šç§é£æ ¼
- **æµè¡Œåº¦**: åŒ…å« GitHubã€VS Codeã€Atom ç­‰ç¼–è¾‘å™¨çš„çƒ­é—¨ä¸»é¢˜
- **ä¸“ä¸šæ€§**: æ‰€æœ‰ä¸»é¢˜å‡æ¥è‡ª Shiki å®˜æ–¹æ”¯æŒçš„ä¸»é¢˜åº“
- **æ€§èƒ½**: é»˜è®¤åŠ è½½ï¼Œæ— éœ€é¢å¤–é…ç½®

---

## åŠŸèƒ½å¯¹æ¯”

### å®æ–½å‰

| åŠŸèƒ½ | çŠ¶æ€ |
|------|------|
| Mermaid å›¾è¡¨ | âœ… å·²æ”¯æŒ |
| Graphviz å›¾è¡¨ | âœ… å·²æ”¯æŒ |
| Vega å›¾è¡¨ | âŒ æœªå®ç° |
| JSON Canvas | âŒ æœªå®ç° |
| ä»£ç é«˜äº®ä¸»é¢˜ | âš ï¸ ä»… 7 ä¸ª |

### å®æ–½å

| åŠŸèƒ½ | çŠ¶æ€ |
|------|------|
| Mermaid å›¾è¡¨ | âœ… å·²æ”¯æŒ |
| Graphviz å›¾è¡¨ | âœ… å·²æ”¯æŒ |
| Vega å›¾è¡¨ | âœ… **æ–°å¢** |
| JSON Canvas | âœ… **æ–°å¢** |
| ä»£ç é«˜äº®ä¸»é¢˜ | âœ… **30+ ä¸ª** |

---

## æŠ€æœ¯äº®ç‚¹

### 1. æ’ä»¶æ¶æ„ä¸€è‡´æ€§

æ‰€æœ‰æ–°å¢æ’ä»¶éµå¾ªç»Ÿä¸€çš„æ¶æ„æ¨¡å¼ï¼š
- å®ç° `RendererPlugin` æ¥å£
- æä¾› `Plugin` ç”Ÿå‘½å‘¨æœŸç®¡ç†
- åŒ…å«å®Œæ•´çš„ manifest.json é…ç½®
- æä¾›è¯¦ç»†çš„ README æ–‡æ¡£

### 2. æ€§èƒ½ä¼˜åŒ–

- **ç¼“å­˜æœºåˆ¶**: æ‰€æœ‰æ¸²æŸ“å™¨éƒ½å®ç°äº† LRU ç¼“å­˜
- **ç¼“å­˜è¿‡æœŸ**: 5 åˆ†é’Ÿ TTLï¼Œè‡ªåŠ¨æ¸…ç†è¿‡æœŸç¼“å­˜
- **æ‡’åŠ è½½**: æŒ‰éœ€åŠ è½½æ¸²æŸ“å™¨å®ä¾‹

### 3. é”™è¯¯å¤„ç†

- **ä¼˜é›…é™çº§**: æ¸²æŸ“å¤±è´¥æ—¶æä¾›å‹å¥½çš„é”™è¯¯ä¿¡æ¯
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- **è¾“å…¥éªŒè¯**: ä¸¥æ ¼çš„è¾“å…¥æ ¼å¼éªŒè¯

### 4. ä¸»é¢˜æ”¯æŒ

- **ç»Ÿä¸€ä¸»é¢˜ç³»ç»Ÿ**: æ‰€æœ‰æ¸²æŸ“å™¨æ”¯æŒ light/dark/custom ä¸»é¢˜
- **è‡ªåŠ¨é€‚é…**: æ ¹æ®ç³»ç»Ÿä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢
- **å¯å®šåˆ¶**: æ”¯æŒè‡ªå®šä¹‰é¢œè‰²é…ç½®

---

## æµ‹è¯•å»ºè®®

### 1. Vega æ¸²æŸ“å™¨æµ‹è¯•

```typescript
// æµ‹è¯• Vega-Lite æŸ±çŠ¶å›¾
const vegaLiteSpec = `{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {"values": [{"a": "A", "b": 28}]},
  "mark": "bar",
  "encoding": {
    "x": {"field": "a", "type": "nominal"},
    "y": {"field": "b", "type": "quantitative"}
  }
}`;

const renderer = new VegaRenderer('vega-lite');
const svg = await renderer.render(vegaLiteSpec, { theme: 'light' });
```

### 2. JSON Canvas æ¸²æŸ“å™¨æµ‹è¯•

```typescript
// æµ‹è¯•ç®€å•èŠ‚ç‚¹å’Œè¿æ¥
const canvasSpec = `{
  "nodes": [
    {"id": "1", "type": "text", "x": 0, "y": 0, "width": 100, "height": 50, "text": "Node 1"},
    {"id": "2", "type": "text", "x": 150, "y": 0, "width": 100, "height": 50, "text": "Node 2"}
  ],
  "edges": [
    {"id": "e1", "fromNode": "1", "toNode": "2"}
  ]
}`;

const renderer = new JSONCanvasRenderer();
const svg = await renderer.render(canvasSpec, { theme: 'dark' });
```

### 3. ä¸»é¢˜æµ‹è¯•

```typescript
// æµ‹è¯•ä¸åŒä¸»é¢˜çš„ä»£ç é«˜äº®
const highlighter = getHighlighter();
const themes = ['github-dark', 'material-theme', 'catppuccin-mocha', 'tokyo-night'];

for (const theme of themes) {
  const html = await highlighter.codeToHtml('console.log("Hello")', {
    lang: 'javascript',
    theme,
  });
  console.log(`Theme: ${theme}`, html);
}
```

---

## æ–‡æ¡£æ›´æ–°

### æ›´æ–°çš„æ–‡ä»¶

1. **ä»»åŠ¡ç´¢å¼•**: `task/20260122-folder-site-support-analysis/ä»»åŠ¡ç´¢å¼•.md`
   - æ›´æ–°åŠŸèƒ½æ”¯æŒç»Ÿè®¡
   - æ›´æ–°ä¾èµ–åˆ—è¡¨
   - æ›´æ–°æ’ä»¶æ¶æ„å›¾
   - æ·»åŠ å®æ–½æ€»ç»“

2. **ä»£ç é«˜äº®å™¨**: `src/server/lib/highlighter.ts`
   - æ‰©å±•ä¸»é¢˜åˆ—è¡¨
   - æ·»åŠ ä¸»é¢˜åˆ†ç±»æ³¨é‡Š

### æ–°å¢çš„æ–‡ä»¶

1. **Vega æ’ä»¶**:
   - `plugins/vega-renderer/VegaRenderer.ts`
   - `plugins/vega-renderer/index.ts`
   - `plugins/vega-renderer/manifest.json`
   - `plugins/vega-renderer/README.md`

2. **JSON Canvas æ’ä»¶**:
   - `plugins/json-canvas-renderer/JSONCanvasRenderer.ts`
   - `plugins/json-canvas-renderer/index.ts`
   - `plugins/json-canvas-renderer/manifest.json`
   - `plugins/json-canvas-renderer/README.md`

---

## ä¸‹ä¸€æ­¥å»ºè®®

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰

1. **é›†æˆæµ‹è¯•**
   - ç¼–å†™å•å…ƒæµ‹è¯•
   - ç¼–å†™é›†æˆæµ‹è¯•
   - æµ‹è¯•ä¸åŒä¸»é¢˜å’Œæ ¼å¼

2. **æ–‡æ¡£å®Œå–„**
   - æ·»åŠ ä½¿ç”¨ç¤ºä¾‹åˆ°ä¸»æ–‡æ¡£
   - åˆ›å»ºå¿«é€Ÿå…¥é—¨æŒ‡å—
   - æ·»åŠ å¸¸è§é—®é¢˜è§£ç­”

3. **æ€§èƒ½ä¼˜åŒ–**
   - æ€§èƒ½åŸºå‡†æµ‹è¯•
   - ä¼˜åŒ–ç¼“å­˜ç­–ç•¥
   - å‡å°‘åˆå§‹åŒ–æ—¶é—´

### ä¸­æœŸï¼ˆ1-2æœˆï¼‰

1. **åŠŸèƒ½å¢å¼º**
   - æ·»åŠ æ›´å¤š Vega å›¾è¡¨ç¤ºä¾‹
   - æ”¯æŒ JSON Canvas é«˜çº§ç‰¹æ€§
   - æ·»åŠ ä¸»é¢˜é¢„è§ˆåŠŸèƒ½

2. **ç”¨æˆ·ä½“éªŒ**
   - æ·»åŠ ä¸»é¢˜é€‰æ‹©å™¨ UI
   - æ·»åŠ å›¾è¡¨ç¼–è¾‘å™¨
   - æ·»åŠ å®æ—¶é¢„è§ˆ

3. **ç”Ÿæ€ç³»ç»Ÿ**
   - å‘å¸ƒæ’ä»¶åˆ° npm
   - åˆ›å»ºæ’ä»¶å¸‚åœº
   - æ”¯æŒç¬¬ä¸‰æ–¹æ’ä»¶

### é•¿æœŸï¼ˆ3-6æœˆï¼‰

1. **é«˜çº§åŠŸèƒ½**
   - æ”¯æŒäº¤äº’å¼å›¾è¡¨
   - æ”¯æŒåŠ¨ç”»æ•ˆæœ
   - æ”¯æŒåä½œç¼–è¾‘

2. **å¹³å°æ‰©å±•**
   - ç§»åŠ¨ç«¯é€‚é…
   - æ¡Œé¢åº”ç”¨
   - äº‘ç«¯åŒæ­¥

---

## æ€»ç»“

æœ¬æ¬¡å®æ–½æˆåŠŸå®Œæˆäº†ä¸‰é¡¹é‡è¦åŠŸèƒ½å¢å¼ºï¼š

1. âœ… **Vega/Vega-Lite æ”¯æŒ** - ä¸º folder-site æ·»åŠ äº†å¼ºå¤§çš„æ•°æ®å¯è§†åŒ–èƒ½åŠ›
2. âœ… **JSON Canvas æ”¯æŒ** - æ”¯æŒç°ä»£åŒ–çš„æ— é™ç”»å¸ƒæ ¼å¼
3. âœ… **ä¸»é¢˜æ‰©å±•** - æä¾› 30+ ä¸ªä¸“ä¸šä»£ç é«˜äº®ä¸»é¢˜

è¿™äº›æ”¹è¿›æ˜¾è‘—æå‡äº† folder-site çš„å†…å®¹æ¸²æŸ“èƒ½åŠ›ï¼Œä½¿å…¶æˆä¸ºæ›´åŠ å®Œæ•´å’Œä¸“ä¸šçš„æ–‡æ¡£ç½‘ç«™ç”Ÿæˆå·¥å…·ã€‚

**å®æ–½è´¨é‡**:
- âœ… ä»£ç è´¨é‡é«˜ï¼Œéµå¾ªæœ€ä½³å®è·µ
- âœ… å®Œæ•´çš„ç±»å‹å®šä¹‰
- âœ… è¯¦ç»†çš„æ–‡æ¡£å’Œæ³¨é‡Š
- âœ… ç»Ÿä¸€çš„æ’ä»¶æ¶æ„
- âœ… å®Œå–„çš„é”™è¯¯å¤„ç†

**é¡¹ç›®çŠ¶æ€**: ğŸ‰ **æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆ**
