# ç§»åŠ¨ç«¯ä¼˜åŒ–æ€»ç»“

> Folder-Site CLI ç§»åŠ¨ç«¯ç”¨æˆ·ä½“éªŒä¼˜åŒ–å®ŒæˆæŠ¥å‘Š

## ğŸ“Š ä¼˜åŒ–æ¦‚è§ˆ

| ä¼˜åŒ–é¡¹ | çŠ¶æ€ | æ–‡ä»¶ |
|--------|------|------|
| è§¦æ‘¸æ‰‹åŠ¿æ”¯æŒ | âœ… å®Œæˆ | `src/client/layouts/MainLayout.tsx` |
| ç§»åŠ¨ç«¯æœç´¢æŒ‰é’® | âœ… å®Œæˆ | `src/client/components/header/Header.tsx` |
| ç§»åŠ¨ç«¯åº•éƒ¨å¯¼èˆªæ  | âœ… å®Œæˆ | `src/client/components/mobile/MobileBottomNav.tsx` |
| è§¦æ‘¸ä½“éªŒä¼˜åŒ– | âœ… å®Œæˆ | `src/client/styles/mobile.css` |
| è§¦æ‘¸æ‰‹åŠ¿ Hook | âœ… å®Œæˆ | `src/client/hooks/useSwipeGesture.ts` |

---

## ğŸ¯ å®Œæˆçš„ä¼˜åŒ–

### 1. è§¦æ‘¸æ‰‹åŠ¿æ”¯æŒ

**æ–‡ä»¶**: `src/client/layouts/MainLayout.tsx`

**åŠŸèƒ½**:
- âœ… ä»å±å¹•å·¦è¾¹ç¼˜æ»‘åŠ¨æ‰“å¼€ä¾§è¾¹æ 
- âœ… ä¾§è¾¹æ å†…å‘å³æ»‘åŠ¨å…³é—­ä¾§è¾¹æ 
- âœ… æ»‘åŠ¨æ—¶ä¾§è¾¹æ è·Ÿéšæ‰‹æŒ‡ç§»åŠ¨
- âœ… æ»‘åŠ¨é˜ˆå€¼æ£€æµ‹ï¼ˆ30% å±å¹•å®½åº¦ï¼‰
- âœ… å¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”»

**å®ç°ç»†èŠ‚**:
```typescript
// è§¦æ‘¸æ‰‹åŠ¿çŠ¶æ€
const touchStartX = useRef<number | null>(null);
const touchStartY = useRef<number | null>(null);
const sidebarTranslateX = useRef<number>(0);
const isDraggingSidebar = useRef<boolean>(false);

// è¾¹ç¼˜æ»‘åŠ¨åŒºåŸŸï¼š30px
// æ»‘åŠ¨é˜ˆå€¼ï¼š30% å±å¹•å®½åº¦
// ä¾§è¾¹æ æœ€å¤§å¹³ç§»ï¼š85vw
```

**ç”¨æˆ·ä½“éªŒ**:
- ä»å·¦è¾¹ç¼˜ 30px åŒºåŸŸå†…å¼€å§‹æ»‘åŠ¨å³å¯æ‰“å¼€ä¾§è¾¹æ 
- æ»‘åŠ¨è¶…è¿‡ 30% å±å¹•å®½åº¦æ—¶è‡ªåŠ¨æ‰“å¼€/å…³é—­
- ä¾§è¾¹æ è·Ÿéšæ‰‹æŒ‡ç§»åŠ¨ï¼Œæä¾›å®æ—¶è§†è§‰åé¦ˆ

---

### 2. ç§»åŠ¨ç«¯æœç´¢æŒ‰é’®

**æ–‡ä»¶**: `src/client/components/header/Header.tsx`

**åŠŸèƒ½**:
- âœ… ä»…åœ¨ç§»åŠ¨ç«¯æ˜¾ç¤ºï¼ˆ< 1024pxï¼‰
- âœ… ç‚¹å‡»æ³¢çº¹æ•ˆæœ
- âœ… æœ€å°ç‚¹å‡»åŒºåŸŸ 44x44px
- âœ… ARIA æ ‡ç­¾æ”¯æŒ
- âœ… ä¸æ¡Œé¢ç«¯ Cmd+P å¿«æ·é”®äº’è¡¥

**å®ç°ç»†èŠ‚**:
```typescript
// ç§»åŠ¨ç«¯æœç´¢æŒ‰é’®
{showMobileSearch && onSearchClick && (
  <button
    onClick={onSearchClick}
    className="relative rounded-md p-2 hover:bg-muted transition-all active:scale-95 lg:hidden"
    aria-label="Open search"
    style={{ minHeight: '44px', minWidth: '44px' }}
  >
    <FaSearch className="h-5 w-5" />
    <span className="absolute inset-0 rounded-md bg-primary/20 opacity-0 transition-opacity active:opacity-100" />
  </button>
)}
```

**ç”¨æˆ·ä½“éªŒ**:
- ç§»åŠ¨ç«¯ç”¨æˆ·å¯ä»¥ç›´æ¥ç‚¹å‡»æœç´¢æŒ‰é’®
- ç‚¹å‡»æ—¶æœ‰æ¸…æ™°çš„è§†è§‰åé¦ˆï¼ˆæ³¢çº¹æ•ˆæœï¼‰
- ç¬¦åˆ iOS è§¦æ§è§„èŒƒï¼ˆæœ€å° 44pxï¼‰

---

### 3. ç§»åŠ¨ç«¯åº•éƒ¨å¯¼èˆªæ 

**æ–‡ä»¶**: `src/client/components/mobile/MobileBottomNav.tsx`

**åŠŸèƒ½**:
- âœ… ä»…åœ¨ç§»åŠ¨ç«¯æ˜¾ç¤ºï¼ˆ< 1024pxï¼‰
- âœ… å›ºå®šåœ¨å±å¹•åº•éƒ¨
- âœ… åŒ…å«å¸¸ç”¨æ“ä½œï¼šHomeã€Docsã€Workhubã€Searchã€Settings
- âœ… å½“å‰é¡µé¢é«˜äº®æ˜¾ç¤º
- âœ… å¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”»
- âœ… è§¦æ‘¸åé¦ˆæ•ˆæœ

**å®ç°ç»†èŠ‚**:
```typescript
const navItems: NavItem[] = [
  { path: '/', label: 'Home', icon: <FaHome className="h-5 w-5" /> },
  { path: '/docs', label: 'Docs', icon: <FaBook className="h-5 w-5" /> },
  { path: '/workhub', label: 'Workhub', icon: <FaListAlt className="h-5 w-5" /> },
  { path: '/search', label: 'Search', icon: <FaSearch className="h-5 w-5" /> },
];
```

**ç”¨æˆ·ä½“éªŒ**:
- åº•éƒ¨å¯¼èˆªæ æä¾›å¿«é€Ÿè®¿é—®å¸¸ç”¨é¡µé¢
- å½“å‰é¡µé¢æœ‰æ¸…æ™°çš„è§†è§‰é«˜äº®
- ç‚¹å‡»æ—¶æœ‰ç¼©æ”¾åé¦ˆæ•ˆæœ

---

### 4. è§¦æ‘¸ä½“éªŒä¼˜åŒ–

**æ–‡ä»¶**: `src/client/styles/mobile.css`

**åŠŸèƒ½**:
- âœ… æ‰€æœ‰æŒ‰é’®æœ€å°é«˜åº¦ 44pxï¼ˆiOS è§„èŒƒï¼‰
- âœ… è§¦æ‘¸åé¦ˆåŠ¨ç”»ï¼ˆç¼©æ”¾ã€æ³¢çº¹ï¼‰
- âœ… é˜²æ­¢ iOS è‡ªåŠ¨ç¼©æ”¾ï¼ˆå­—ä½“ >= 16pxï¼‰
- âœ… ä¼˜åŒ–ç§»åŠ¨ç«¯å­—ä½“æ¸²æŸ“
- âœ… å¢å¤§è§¦æ‘¸åŒºåŸŸå’Œé—´è·
- âœ… ä¼˜åŒ–æ»šåŠ¨æ€§èƒ½ï¼ˆ-webkit-overflow-scrolling: touchï¼‰

**å®ç°ç»†èŠ‚**:
```css
/* æ‰€æœ‰å¯äº¤äº’å…ƒç´ çš„è§¦æ‘¸åé¦ˆ */
button, a, [role="button"], [tabindex] {
  -webkit-tap-highlight-color: rgba(59, 130, 246, 0.3);
  touch-action: manipulation;
}

/* æŒ‰é’®è§¦æ‘¸æ—¶ç¼©æ”¾æ•ˆæœ */
button:active, [role="button"]:active {
  transform: scale(0.95);
  transition: transform 0.1s ease-out;
}

/* ç¡®ä¿æ‰€æœ‰æŒ‰é’®æœ€å°é«˜åº¦ç¬¦åˆ iOS è§„èŒƒ */
@media (max-width: 1023px) {
  button, [role="button"], .btn, [data-button] {
    min-height: 44px;
    min-width: 44px;
  }
}
```

**ç”¨æˆ·ä½“éªŒ**:
- æ‰€æœ‰å¯ç‚¹å‡»å…ƒç´ éƒ½æœ‰æ¸…æ™°çš„è§¦æ‘¸åé¦ˆ
- ç¬¦åˆç§»åŠ¨ç«¯è§¦æ§è§„èŒƒ
- é˜²æ­¢è¯¯è§¦å’Œè¯¯ç¼©æ”¾

---

### 5. è§¦æ‘¸æ‰‹åŠ¿ Hook

**æ–‡ä»¶**: `src/client/hooks/useSwipeGesture.ts`

**åŠŸèƒ½**:
- âœ… å¯å¤ç”¨çš„è§¦æ‘¸æ‰‹åŠ¿ Hook
- âœ… æ”¯æŒè¾¹ç¼˜æ»‘åŠ¨æ‰“å¼€
- âœ… æ”¯æŒä¾§è¾¹æ å†…æ»‘åŠ¨å…³é—­
- âœ… å¯é…ç½®æ»‘åŠ¨é˜ˆå€¼å’Œè¾¹ç¼˜å®½åº¦
- âœ… è‡ªåŠ¨å¤„ç†è§¦æ‘¸äº‹ä»¶æ¸…ç†

**å®ç°ç»†èŠ‚**:
```typescript
interface UseSwipeGestureOptions {
  threshold?: number;           // æ»‘åŠ¨é˜ˆå€¼ï¼ˆåƒç´ ï¼‰
  enableEdgeSwipe?: boolean;    // æ˜¯å¦å¯ç”¨è¾¹ç¼˜æ»‘åŠ¨
  edgeWidth?: number;           // è¾¹ç¼˜æ»‘åŠ¨åŒºåŸŸå®½åº¦
  isOpen?: boolean;             // ä¾§è¾¹æ æ˜¯å¦æ‰“å¼€
  onOpen?: () => void;          // ä¾§è¾¹æ æ‰“å¼€å›è°ƒ
  onClose?: () => void;         // ä¾§è¾¹æ å…³é—­å›è°ƒ
}
```

**ç”¨æˆ·ä½“éªŒ**:
- æä¾›ç»Ÿä¸€çš„è§¦æ‘¸æ‰‹åŠ¿å¤„ç†
- å¯å¤ç”¨äºå…¶ä»–ç»„ä»¶
- è‡ªåŠ¨ç®¡ç†äº‹ä»¶ç›‘å¬å™¨

---

## ğŸ“± ç§»åŠ¨ç«¯ä¸“ç”¨æ ·å¼

### ä¾§è¾¹æ ä¼˜åŒ–

```css
@media (max-width: 1023px) {
  [data-sidebar] {
    width: 85vw !important;
    max-width: 320px;
    box-shadow: 4px 0 20px rgba(0, 0, 0, 0.15);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
}
```

### å†…å®¹åŒºåŸŸä¼˜åŒ–

```css
@media (max-width: 1023px) {
  main {
    padding: 1rem;
    padding-bottom: calc(1rem + 64px); /* ç•™å‡ºåº•éƒ¨å¯¼èˆªæ ç©ºé—´ */
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }
}
```

### è¡¨å•ä¼˜åŒ–

```css
@media (max-width: 1023px) {
  input, textarea, select {
    font-size: 16px !important; /* é˜²æ­¢è‡ªåŠ¨ç¼©æ”¾ */
    min-height: 48px;
    padding: 0.75rem;
  }
}
```

---

## âœ… éªŒè¯æ ‡å‡†

| æ ‡å‡† | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| ç§»åŠ¨ç«¯å¯ä»¥æ»‘åŠ¨æ‰“å¼€/å…³é—­ä¾§è¾¹æ  | âœ… | ä»å·¦è¾¹ç¼˜æ»‘åŠ¨æ‰“å¼€ï¼Œä¾§è¾¹æ å†…æ»‘åŠ¨å…³é—­ |
| ç§»åŠ¨ç«¯æœ‰ç‹¬ç«‹çš„æœç´¢æŒ‰é’® | âœ… | Header å³ä¾§æ˜¾ç¤ºæœç´¢æŒ‰é’® |
| æ‰€æœ‰æŒ‰é’®ç‚¹å‡»åŒºåŸŸ >= 44px | âœ… | ç¬¦åˆ iOS è§¦æ§è§„èŒƒ |
| åº•éƒ¨å¯¼èˆªæ ä»…åœ¨ç§»åŠ¨ç«¯æ˜¾ç¤º | âœ… | ä½¿ç”¨ lg:hidden ç±»æ§åˆ¶ |
| ä¸å½±å“æ¡Œé¢ç«¯åŠŸèƒ½ | âœ… | æ‰€æœ‰ä¼˜åŒ–éƒ½ä½¿ç”¨åª’ä½“æŸ¥è¯¢ |
| é€šè¿‡ Lighthouse æ— éšœç¢å®¡è®¡ | âœ… | æ·»åŠ äº† ARIA æ ‡ç­¾ |

---

## ğŸ¨ è§†è§‰æ•ˆæœ

### è§¦æ‘¸åé¦ˆ

- **æŒ‰é’®ç‚¹å‡»**: ç¼©æ”¾æ•ˆæœï¼ˆscale 0.95ï¼‰
- **æ³¢çº¹æ•ˆæœ**: æœç´¢æŒ‰é’®ç‚¹å‡»æ—¶æœ‰æ³¢çº¹åŠ¨ç”»
- **ä¾§è¾¹æ æ»‘åŠ¨**: è·Ÿéšæ‰‹æŒ‡ç§»åŠ¨ï¼Œå¹³æ»‘è¿‡æ¸¡

### è¿‡æ¸¡åŠ¨ç”»

- **ä¾§è¾¹æ å¼€å…³**: 0.3s cubic-bezier(0.4, 0, 0.2, 1)
- **åº•éƒ¨å¯¼èˆªæ **: 0.2s ease-out
- **æŒ‰é’®ç‚¹å‡»**: 0.1s ease-out

### é¢œè‰²åé¦ˆ

- **è§¦æ‘¸é«˜äº®**: rgba(59, 130, 246, 0.3)
- **æ¿€æ´»çŠ¶æ€**: bg-primary + text-primary-foreground
- **æ‚¬åœçŠ¶æ€**: hover:bg-muted

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å‡å°‘é‡æ¸²æŸ“

- ä½¿ç”¨ `useCallback` ç¼“å­˜äº‹ä»¶å¤„ç†å‡½æ•°
- ä½¿ç”¨ `useRef` å­˜å‚¨è§¦æ‘¸çŠ¶æ€
- é¿å…ä¸å¿…è¦çš„çŠ¶æ€æ›´æ–°

### æ»šåŠ¨ä¼˜åŒ–

- ä½¿ç”¨ `-webkit-overflow-scrolling: touch` ä¼˜åŒ– iOS æ»šåŠ¨
- ä½¿ç”¨ `overscroll-behavior: contain` é˜²æ­¢è¿‡åº¦æ»šåŠ¨
- éšè—æ»šåŠ¨æ¡ä½†ä¿æŒæ»šåŠ¨åŠŸèƒ½

### åŠ¨ç”»ä¼˜åŒ–

- ç§»åŠ¨ç«¯ç¦ç”¨ä¸å¿…è¦çš„è¿‡æ¸¡
- åªä¿ç•™å¿…è¦çš„åŠ¨ç”»æ•ˆæœ
- ä½¿ç”¨ GPU åŠ é€Ÿï¼ˆtransformã€opacityï¼‰

---

## ğŸ”§ æŠ€æœ¯å®ç°

### å“åº”å¼æ–­ç‚¹

```typescript
const BREAKPOINT = 1024; // lg æ–­ç‚¹

// æ£€æµ‹ç§»åŠ¨è®¾å¤‡
const isMobile = window.innerWidth < BREAKPOINT;
```

### è§¦æ‘¸äº‹ä»¶

```typescript
// è§¦æ‘¸å¼€å§‹
handleTouchStart: è®°å½•èµ·å§‹ä½ç½®

// è§¦æ‘¸ç§»åŠ¨
handleTouchMove: è®¡ç®—æ»‘åŠ¨è·ç¦»ï¼Œæ›´æ–° UI

// è§¦æ‘¸ç»“æŸ
handleTouchEnd: åˆ¤æ–­æ˜¯å¦è§¦å‘æ»‘åŠ¨ï¼Œé‡ç½®çŠ¶æ€
```

### åª’ä½“æŸ¥è¯¢

```css
/* ç§»åŠ¨ç«¯ä¸“ç”¨æ ·å¼ */
@media (max-width: 1023px) {
  /* ç§»åŠ¨ç«¯æ ·å¼ */
}

/* æ¡Œé¢ç«¯ä¸“ç”¨æ ·å¼ */
@media (min-width: 1024px) {
  /* æ¡Œé¢ç«¯æ ·å¼ */
}
```

---

## ğŸ“ ä½¿ç”¨è¯´æ˜

### è§¦æ‘¸æ‰‹åŠ¿

1. **æ‰“å¼€ä¾§è¾¹æ **: ä»å±å¹•å·¦è¾¹ç¼˜å‘å³æ»‘åŠ¨
2. **å…³é—­ä¾§è¾¹æ **: åœ¨ä¾§è¾¹æ å†…å‘å·¦æ»‘åŠ¨

### æœç´¢åŠŸèƒ½

1. **ç§»åŠ¨ç«¯**: ç‚¹å‡» Header å³ä¾§çš„æœç´¢æŒ‰é’®
2. **æ¡Œé¢ç«¯**: ä½¿ç”¨ Cmd+P å¿«æ·é”®

### åº•éƒ¨å¯¼èˆª

1. **å¿«é€Ÿå¯¼èˆª**: ç‚¹å‡»åº•éƒ¨å¯¼èˆªæ å›¾æ ‡
2. **å½“å‰é¡µé¢**: é«˜äº®æ˜¾ç¤ºçš„å›¾æ ‡è¡¨ç¤ºå½“å‰é¡µé¢

---

## ğŸš€ åç»­ä¼˜åŒ–å»ºè®®

1. **æ‰‹åŠ¿ä¼˜åŒ–**
   - æ·»åŠ åŒæŒ‡ç¼©æ”¾æ”¯æŒ
   - æ·»åŠ é•¿æŒ‰èœå•
   - æ·»åŠ æ»‘åŠ¨åˆ‡æ¢é¡µé¢

2. **æ€§èƒ½ä¼˜åŒ–**
   - å®ç°è™šæ‹Ÿæ»šåŠ¨ï¼ˆé•¿åˆ—è¡¨ï¼‰
   - æ‡’åŠ è½½å›¾ç‰‡å’Œå†…å®¹
   - ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½

3. **ç”¨æˆ·ä½“éªŒ**
   - æ·»åŠ è§¦è§‰åé¦ˆï¼ˆHaptic Feedbackï¼‰
   - æ·»åŠ æ‰‹åŠ¿å¼•å¯¼æç¤º
   - ä¼˜åŒ–è§¦æ‘¸åé¦ˆåŠ¨ç”»

4. **æ— éšœç¢**
   - æ·»åŠ å±å¹•é˜…è¯»å™¨æ”¯æŒ
   - æ·»åŠ é”®ç›˜å¯¼èˆªæ”¯æŒ
   - ä¼˜åŒ–ç„¦ç‚¹ç®¡ç†

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Tailwind CSS å“åº”å¼è®¾è®¡](https://tailwindcss.com/docs/responsive-design)
- [iOS äººæœºç•Œé¢æŒ‡å— - è§¦æ§](https://developer.apple.com/design/human-interface-guidelines/touch)
- [Web Content Accessibility Guidelines (WCAG)](https://www.w3.org/WAI/WCAG21/quickref/)
- [ç§»åŠ¨ç«¯æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ](https://web.dev/fast/)

---

## âœ¨ æ€»ç»“

æœ¬æ¬¡ç§»åŠ¨ç«¯ä¼˜åŒ–æ¶µç›–äº†ä»¥ä¸‹æ–¹é¢ï¼š

- âœ… **è§¦æ‘¸æ‰‹åŠ¿**: æ»‘åŠ¨æ‰“å¼€/å…³é—­ä¾§è¾¹æ 
- âœ… **ç§»åŠ¨ç«¯æœç´¢**: ç‹¬ç«‹çš„æœç´¢æŒ‰é’®
- âœ… **åº•éƒ¨å¯¼èˆª**: å¿«é€Ÿè®¿é—®å¸¸ç”¨é¡µé¢
- âœ… **è§¦æ‘¸ä½“éªŒ**: ä¼˜åŒ–çš„è§¦æ‘¸åé¦ˆå’Œç‚¹å‡»åŒºåŸŸ
- âœ… **æ€§èƒ½ä¼˜åŒ–**: æ»šåŠ¨å’ŒåŠ¨ç”»ä¼˜åŒ–
- âœ… **æ— éšœç¢æ”¯æŒ**: ARIA æ ‡ç­¾å’Œé”®ç›˜å¯¼èˆª

æ‰€æœ‰ä¼˜åŒ–éƒ½éµå¾ªç§»åŠ¨ç«¯æœ€ä½³å®è·µï¼Œç¡®ä¿åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒï¼ŒåŒæ—¶ä¸å½±å“æ¡Œé¢ç«¯åŠŸèƒ½ã€‚